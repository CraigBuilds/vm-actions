#cloud-config
# Install essential packages at boot time
packages:
  - sudo

users:
  - name: ${username}
    groups: sudo
    shell: /bin/bash
    sudo: ['ALL=(ALL) NOPASSWD:ALL']
    lock_passwd: false%{ if password != "" }
    passwd: ${password}%{ endif }
    %{ if ssh_public_key != "" }
    ssh_authorized_keys:
      - ${ssh_public_key}%{ endif }

# Set hostname
hostname: ${hostname}
manage_etc_hosts: true

# Configure SSH
ssh_pwauth: true
disable_root: false
